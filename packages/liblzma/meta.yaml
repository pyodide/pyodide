package:
  name: liblzma
  version: 5.2.5

source:
  url: https://github.com/xz-mirror/xz/archive/refs/tags/v5.2.5.tar.gz
  sha256: 0d2b89629f13dd1a0602810529327195eff5f62a0142ccd65b903bc16a4ac78a

build:
  library: true
  script: |
    emconfigure ./configure \
        CFLAGS="-fPIC" \
        --disable-xz \
        --disable-xzdec \
        --disable-lzmadec \
        --disable-lzmainfo \
        --disable-lzma-links \
        --disable-scripts \
        --disable-doc \
        --enable-shared=no \
        --prefix=${WASM_LIBRARY_DIR}

    emmake make -j ${PYODIDE_JOBS:-3}
    emmake make install
