package:
  name: h5py
  version: 3.8.0
  top-level:
    - h5py
source:
  url: https://files.pythonhosted.org/packages/69/f4/3172bb63d3c57e24aec42bb93fcf1da4102752701ab5ad10b3ded00d0c5b/h5py-3.8.0.tar.gz
  sha256: 6fead82f0c4000cf38d53f9c030780d81bfa0220218aee13b90b7701c937d95f
  patches:
    - patches/0001-Fix-incompatible-pointer-type.patch
    - patches/configure.patch

requirements:
  run:
    - numpy
    - pkgconfig
  host:
    - libhdf5

build:
  vendor-sharedlib: true
  script: |
    export HDF5_MPI=OFF
    export H5PY_SETUP_REQUIRES="0"
    export HDF5_VERSION=1.12.1
    export HDF5_DIR=${WASM_LIBRARY_DIR}
