package:
  name: sparseqr
  version: "1.2"

source:
  sha256: cca67680bb4d32f6a6dee303399a5f62badac255f8b8ee8f6d41a7e3a4e2c49d
  url: https://files.pythonhosted.org/packages/8e/18/fd29b392a2b6902fd88e86a04c73a7af15a6f12046cee3a0632be9ef4f32/sparseqr-1.2.tar.gz

requirements:
  run:
    - pycparser
    - cffi
    - numpy
    - scipy
    - suitesparse

build:
  cflags: |
    -I${WASM_LIBRARY_DIR}/include
  ldflags: |
    -L${WASM_LIBRARY_DIR}/lib
  script:
    # FIXME: We are not dealing with poetry build system correctly.
    #        So for now remove `pyproject.toml` to force pypabuild to use setup.py
    rm pyproject.toml

test:
  imports:
    - sparseqr
