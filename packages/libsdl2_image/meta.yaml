package:
  name: libsdl2_image
  version: 2.8.2

source:
  url: https://github.com/libsdl-org/SDL_image/releases/download/release-2.8.2/SDL2_image-2.8.2.tar.gz
  sha256: 8f486bbfbcf8464dd58c9e5d93394ab0255ce68b51c5a966a918244820a76ddc

build:
  type: static_library
  script: |
    embuilder build libjpeg libpng giflib --pic

    mkdir build && cd build && emcmake cmake \
      -DCMAKE_C_FLAGS="-fPIC" \
      -DCMAKE_INSTALL_PREFIX=${WASM_LIBRARY_DIR} \
      -DBUILD_SHARED_LIBS=OFF \
      ../

    emmake make -j ${PYODIDE_JOBS:-3}
    emmake make install